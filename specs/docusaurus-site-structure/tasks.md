# Tasks: Docusaurus Site Structure

**Input**: Design documents from `/specs/docusaurus-site-structure/`
**Prerequisites**: plan.md (implementation architecture), spec.md (user stories and requirements)

**Tests**: Tests are NOT required for this static site structure implementation (no backend logic to test).

**Organization**: Tasks are grouped by user story to enable independent implementation and testing of each story.

## Format: `[ID] [P?] [Story] Description`

- **[P]**: Can run in parallel (different files, no dependencies)
- **[Story]**: Which user story this task belongs to (e.g., US1, US2, US3)
- Include exact file paths in descriptions

## Path Conventions

This is a single Docusaurus project located in the `book-source/` directory with the following structure:
- **Site configuration**: `book-source/docusaurus.config.ts`, `book-source/sidebars.ts`, `book-source/package.json`
- **Custom components**: `book-source/src/components/`
- **Theme overrides**: `book-source/src/theme/`
- **Custom CSS**: `book-source/src/css/`
- **Homepage**: `book-source/src/pages/`
- **Documentation content**: `book-source/docs/`
- **Static assets**: `book-source/static/`

**Note**: All Docusaurus-related files are contained in the `book-source/` directory to separate the site source from project specs and tooling.

---

## Phase 1: Setup (Shared Infrastructure)

**Purpose**: Initialize Docusaurus project and configure basic structure

- [X] T001 Initialize Docusaurus 3.9.2 project with TypeScript using `npx create-docusaurus@3.9.2 . classic --typescript`
- [X] T002 Configure Git ignore for `node_modules/`, `build/`, `.docusaurus/` in `.gitignore`
- [X] T003 Lock Docusaurus version to 3.9.2 in `package.json`
- [X] T004 [P] Configure dark mode as default in `docusaurus.config.ts` (`colorMode.defaultMode: 'dark'`)
- [X] T005 [P] Update site metadata in `docusaurus.config.ts` (title: 'Physical AI & Humanoid Robotics', tagline, url, baseUrl)
- [X] T006 [P] Configure navbar in `docusaurus.config.ts` (title on left, GitHub link on right)
- [X] T007 [P] Simplify footer in `docusaurus.config.ts` (copyright only, remove unnecessary sections)
- [X] T008 [P] Add gh-pages package for deployment: `npm install --save-dev gh-pages`
- [X] T009 [P] Add deploy script to `package.json` scripts section: `"deploy": "docusaurus deploy"`
- [X] T010 Test initial build: run `npm run build` and verify `/build/` directory created
- [X] T011 Test dev server: run `npm run start` and verify site launches on localhost:3000

**Checkpoint**: Docusaurus installed, configured, and builds successfully

---

## Phase 2: Foundational (Blocking Prerequisites)

**Purpose**: Core infrastructure that MUST be complete before ANY user story can be implemented

**âš ï¸ CRITICAL**: No user story work can begin until this phase is complete

- [X] T012 Create custom CSS file at `src/css/custom.css` with dark theme colors
- [X] T013 [P] Set CSS variables in `src/css/custom.css` for primary/secondary colors (dark theme palette)
- [X] T014 [P] Set base typography in `src/css/custom.css` (font-family, sizes, line-height)
- [X] T015 [P] Configure auto-generated sidebar in `sidebars.ts` using `type: 'autogenerated', dirName: '.'`
- [X] T016 [P] Configure docs plugin in `docusaurus.config.ts` preset (routeBasePath: 'docs', sidebarPath: './sidebars.ts')
- [X] T017 Add placeholder book cover image to `static/img/book-cover.png` (300x400px placeholder)
- [X] T018 Add favicon to `static/img/favicon.ico`

**Checkpoint**: Foundation ready - user story implementation can now begin in parallel

---

## Phase 3: User Story 3 - Reader Discovers Project on Homepage (Priority: P1) ðŸŽ¯ MVP

**Goal**: New visitors see a polished homepage with hero section, tagline, CTA button, and feature tags

**Independent Test**:
- Visit homepage at `/`
- Verify dark-themed header displays with book title and GitHub link
- Verify hero section shows book cover, title "Physical AI & Humanoid Robotics", subtitle, and "Start Reading" button
- Verify tag block displays "Open Source" and "Embodied Intelligence" tags
- Verify "Start Reading" button links to `/docs/preface`
- Verify responsive layout on mobile (header, hero, tags stack vertically)

### Implementation for User Story 3

- [X] T019 [P] [US3] Create Header component at `src/components/Header.tsx` with dark background, sticky position, title (left), GitHub link (right)
- [X] T020 [P] [US3] Create HomepageHero component at `src/components/HomepageHero.tsx` with book cover, title, subtitle, CTA button props
- [X] T021 [P] [US3] Create TagBlock component at `src/components/TagBlock.tsx` accepting tags array and rendering horizontal tag list
- [X] T022 [US3] Update homepage at `src/pages/index.tsx` to import and compose Header, HomepageHero, TagBlock components
- [X] T023 [US3] Add hero styling to `src/css/custom.css` (centered layout, gradient background, responsive stacking)
- [X] T024 [US3] Add tag styling to `src/css/custom.css` (rounded borders, semi-transparent background, horizontal wrap)
- [X] T025 [US3] Configure HomepageHero props in `src/pages/index.tsx`: coverImage='/img/book-cover.png', title, subtitle, ctaText='Start Reading', ctaLink='/docs/preface'
- [X] T026 [US3] Configure TagBlock props in `src/pages/index.tsx`: tags=['Open Source', 'Embodied Intelligence']
- [X] T027 [US3] Test homepage responsiveness on mobile (375px), tablet (768px), desktop (1024px+)
- [X] T028 [US3] Verify Header appears on all pages (homepage and docs)

**Checkpoint**: Homepage is polished and functional with hero, tags, and responsive layout

---

## Phase 4: User Story 5 - Content Creator Adds New Chapter (Priority: P2)

**Goal**: Content creators can add chapters by creating folders and markdown files, with sidebar auto-updating

**Independent Test**:
- Create folder `/docs/part-1-foundations/`
- Add `_category_.json` with `{"label": "Part I: Foundations", "position": 1}`
- Create folder `/docs/part-1-foundations/chapter-1-introduction/`
- Add `_category_.json` with `{"label": "Chapter 1: Introduction", "position": 1}`
- Create three lesson files: `lesson-1-what-is-physical-ai.md`, `lesson-2-history.md`, `lesson-3-challenges.md`
- Verify sidebar displays Part > Chapter > Lessons hierarchy
- Verify clicking lesson navigates to page

### Implementation for User Story 5

- [ ] T029 [US5] Create preface landing page at `docs/preface.md` with frontmatter (id: 'preface', title: 'Preface', sidebar_position: 0)
- [ ] T030 [P] [US5] Create Part 1 folder structure: `docs/part-1-foundations/`
- [ ] T031 [P] [US5] Add Part 1 category file at `docs/part-1-foundations/_category_.json` with label='Part I: Foundations', position=1
- [ ] T032 [P] [US5] Create Chapter 1 folder structure: `docs/part-1-foundations/chapter-1-introduction/`
- [ ] T033 [P] [US5] Add Chapter 1 category file at `docs/part-1-foundations/chapter-1-introduction/_category_.json` with label='Chapter 1: Introduction', position=1
- [ ] T034 [P] [US5] Create Chapter 2 folder structure: `docs/part-1-foundations/chapter-2-robotics-basics/`
- [ ] T035 [P] [US5] Add Chapter 2 category file at `docs/part-1-foundations/chapter-2-robotics-basics/_category_.json` with label='Chapter 2: Robotics Basics', position=2
- [ ] T036 [P] [US5] Create lesson 1-1 at `docs/part-1-foundations/chapter-1-introduction/lesson-1-what-is-physical-ai.md` with frontmatter and placeholder content (H2/H3 headings)
- [ ] T037 [P] [US5] Create lesson 1-2 at `docs/part-1-foundations/chapter-1-introduction/lesson-2-history-and-evolution.md` with frontmatter and placeholder content
- [ ] T038 [P] [US5] Create lesson 1-3 at `docs/part-1-foundations/chapter-1-introduction/lesson-3-core-challenges.md` with frontmatter and placeholder content
- [ ] T039 [P] [US5] Create lesson 2-1 at `docs/part-1-foundations/chapter-2-robotics-basics/lesson-1-mechanical-systems.md` with frontmatter and placeholder content
- [ ] T040 [P] [US5] Create lesson 2-2 at `docs/part-1-foundations/chapter-2-robotics-basics/lesson-2-sensors-actuators.md` with frontmatter and placeholder content
- [ ] T041 [P] [US5] Create lesson 2-3 at `docs/part-1-foundations/chapter-2-robotics-basics/lesson-3-control-theory.md` with frontmatter and placeholder content
- [ ] T042 [US5] Verify sidebar auto-generates Part > Chapter > Lessons tree structure
- [ ] T043 [US5] Test navigation: click each lesson in sidebar and verify page loads
- [ ] T044 [US5] Create CONTRIBUTING.md documenting folder/file naming conventions (chapter-##-slug, lesson-##-slug.md, exactly 3 lessons per chapter)

**Checkpoint**: Content structure established, sidebar auto-generation working, content creator workflow documented

---

## Phase 5: User Story 2 - Reader Views Lesson Content (Priority: P2)

**Goal**: Readers can view lesson content with auto-generated right-side TOC for easy navigation within the lesson

**Independent Test**:
- Navigate to any lesson page (e.g., `/docs/part-1-foundations/chapter-1-introduction/lesson-1-what-is-physical-ai`)
- Verify main content displays in center column (max-width 900px)
- Verify right-side TOC displays H2/H3 headings from the lesson
- Verify clicking TOC link scrolls to that section
- Verify TOC is sticky (scrolls with page)
- Verify on mobile (< 768px), TOC is hidden
- Verify on desktop (>= 1024px), TOC is visible

### Implementation for User Story 2

- [X] T045 [US2] Swizzle DocItem/Layout component: run `npm run swizzle @docusaurus/theme-classic DocItem/Layout -- --wrap`
- [X] T046 [US2] Verify swizzled component created at `src/theme/DocItem/Layout/index.tsx`
- [X] T047 [US2] Add three-column layout CSS to `src/css/custom.css` (left sidebar 250px, center content flex-grow max-width 900px, right TOC 250px)
- [X] T048 [US2] Add sticky positioning for right TOC in `src/css/custom.css` (position: sticky, top: 64px)
- [X] T049 [US2] Add responsive breakpoints in `src/css/custom.css` (hide TOC on mobile < 768px, show on desktop >= 1024px)
- [X] T050 [US2] Test lesson content rendering with H2/H3 headings
- [X] T051 [US2] Test right TOC auto-generation from headings
- [X] T052 [US2] Test TOC click behavior (scrolls to section)
- [X] T053 [US2] Test responsive behavior: mobile hides TOC, desktop shows TOC

**Checkpoint**: Lesson pages display with three-column layout and functional right-side TOC

---

## Phase 6: User Story 1 - Reader Browses Chapters (Priority: P1)

**Goal**: Readers can browse all chapters and lessons from the left sidebar

**Independent Test**:
- Visit any documentation page
- Verify left sidebar displays all Parts, Chapters, Lessons in collapsible tree
- Verify active page is highlighted in sidebar
- Verify clicking chapter expands to show lessons
- Verify clicking lesson navigates to that page
- Verify on mobile (< 768px), sidebar collapses to hamburger menu
- Verify on desktop, sidebar is always visible

### Implementation for User Story 1

- [X] T054 [US1] Verify sidebar displays Parts as top-level collapsible categories
- [X] T055 [US1] Verify sidebar displays Chapters as second-level items under Parts
- [X] T056 [US1] Verify sidebar displays Lessons as third-level items under Chapters
- [X] T057 [US1] Add sidebar styling to `src/css/custom.css` (highlight active page, collapsible arrow icons)
- [X] T058 [US1] Test sidebar collapse/expand behavior for Parts and Chapters
- [X] T059 [US1] Test active page highlighting in sidebar
- [X] T060 [US1] Test sidebar responsiveness: collapses to hamburger on mobile (< 768px)
- [X] T061 [US1] Verify hamburger menu works on mobile (opens/closes sidebar)

**Checkpoint**: Sidebar navigation fully functional with collapsible tree and mobile hamburger menu

---

## Phase 7: User Story 4 - Mobile Reader Navigates Easily (Priority: P3)

**Goal**: Mobile users can navigate the site without layout issues, using hamburger menu for sidebar access

**Independent Test**:
- Open site on mobile device or browser at 375px width
- Verify navbar collapses to hamburger menu
- Verify sidebar accessible via hamburger button
- Verify right TOC is hidden
- Verify hero section and tags stack vertically on homepage
- Verify content is readable without horizontal scrolling
- Verify all tap targets are at least 44px for touch-friendliness

### Implementation for User Story 4

- [X] T062 [P] [US4] Add mobile navbar styles to `src/css/custom.css` (hamburger menu, collapsible navbar)
- [X] T063 [P] [US4] Add mobile hero styles to `src/css/custom.css` (vertical stacking, reduce font sizes)
- [X] T064 [P] [US4] Add mobile tag block styles to `src/css/custom.css` (wrap tags to multiple lines)
- [X] T065 [P] [US4] Add mobile content styles to `src/css/custom.css` (full-width, no horizontal scroll)
- [X] T066 [P] [US4] Ensure minimum tap target size of 44px for buttons and links in `src/css/custom.css`
- [X] T067 [US4] Test homepage on mobile (375px): header, hero, tags stack vertically
- [X] T068 [US4] Test documentation page on mobile (375px): sidebar in hamburger, content full-width, no TOC
- [X] T069 [US4] Test hamburger menu: opens sidebar, closes on selection
- [X] T070 [US4] Test horizontal scrolling: none on any page at 320px+ width
- [X] T071 [US4] Test on multiple mobile devices/browsers (Chrome Mobile, Safari Mobile)

**Checkpoint**: Mobile layout fully responsive and usable on 320px+ screens

---

## Phase 8: Additional Features - Breadcrumbs and AI Tools Placeholder

**Goal**: Add breadcrumbs for navigation context and placeholder AI Tools button for future RAG integration

**Independent Test**:
- Navigate to any lesson page
- Verify breadcrumbs display at top: Part > Chapter > Lesson
- Verify clicking breadcrumb navigates to parent level
- Verify AI Tools button displays (placeholder, disabled)
- Verify button has tooltip "Coming Soon"

### Implementation

- [X] T072 [P] Create Breadcrumbs component at `src/components/Breadcrumbs.tsx` reading page metadata and rendering Part > Chapter > Lesson path
- [X] T073 [P] Create AITools component at `src/components/AITools.tsx` with button variant prop ('button' | 'floating')
- [X] T074 Inject Breadcrumbs into swizzled DocItem/Layout at `src/theme/DocItem/Layout/index.tsx` (top of doc content)
- [X] T075 Inject AITools into swizzled DocItem/Layout at `src/theme/DocItem/Layout/index.tsx` (top-right of doc page)
- [X] T076 [P] Add breadcrumb styling to `src/css/custom.css` (separator arrows, hover states)
- [X] T077 [P] Add AI Tools button styling to `src/css/custom.css` (floating position, disabled state, tooltip)
- [X] T078 Test breadcrumbs navigation: click Part breadcrumb, navigate to part index
- [X] T079 Test breadcrumbs display on all lesson pages
- [X] T080 Test AI Tools button displays with "Coming Soon" tooltip
- [X] T081 Verify AI Tools button is disabled (no action on click)

**Checkpoint**: Breadcrumbs and AI Tools placeholder functional on all doc pages

---

## Phase 9: Polish & Cross-Cutting Concerns

**Purpose**: Final optimizations, testing, and deployment preparation

- [X] T082 [P] Optimize book cover image: convert to WebP format, compress to < 200KB
- [X] T083 [P] Add logo file to `static/img/logo.svg` (if available) and reference in `docusaurus.config.ts`
- [X] T084 [P] Add SEO meta tags in `docusaurus.config.ts` (title, description, Open Graph tags)
- [ ] T085 [P] Test dark/light mode toggle functionality
- [ ] T086 [P] Verify colors are readable in both dark and light modes
- [X] T087 Run full build: `npm run build` and verify no errors
- [X] T088 Test built site locally: `npm run serve` and verify all pages load
- [ ] T089 Run Lighthouse audit on homepage: verify Performance > 90, Accessibility > 90
- [ ] T090 Run Lighthouse audit on doc page: verify Performance > 90, Accessibility > 90
- [ ] T091 Test keyboard navigation: Tab through all interactive elements (links, buttons, sidebar, TOC)
- [ ] T092 Test screen reader: verify page titles, headings, and links are announced correctly (NVDA or VoiceOver)
- [ ] T093 Verify color contrast meets WCAG 2.1 AA standards (4.5:1 for body text, 3:1 for large text)
- [ ] T094 Test cross-browser compatibility: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- [ ] T095 Verify no console errors in browser DevTools on any page
- [X] T096 Verify TypeScript compiles without errors: `tsc --noEmit`
- [X] T097 Configure GitHub Pages deployment in `docusaurus.config.ts` (organizationName, projectName, deploymentBranch: 'gh-pages')
- [ ] T098 Test deployment: run `npm run deploy` and verify site builds to gh-pages branch
- [ ] T099 Verify live site accessible at GitHub Pages URL
- [ ] T100 Final validation: visit live site, test all navigation, verify no broken links

**Checkpoint**: Site fully polished, tested, and deployed to GitHub Pages

---

## Dependencies & Execution Order

### Phase Dependencies

- **Setup (Phase 1)**: No dependencies - can start immediately
- **Foundational (Phase 2)**: Depends on Setup completion - BLOCKS all user stories
- **User Stories (Phases 3-7)**: All depend on Foundational phase completion
  - User stories can then proceed in parallel (if staffed)
  - Or sequentially in priority order:
    - **US3 (Phase 3)**: Homepage - Priority P1 (MVP)
    - **US5 (Phase 4)**: Content Creator workflow - Priority P2
    - **US2 (Phase 5)**: Lesson TOC - Priority P2
    - **US1 (Phase 6)**: Sidebar browsing - Priority P1 (MVP)
    - **US4 (Phase 7)**: Mobile navigation - Priority P3
- **Additional Features (Phase 8)**: Can proceed after US1 and US2 complete (needs doc pages)
- **Polish (Phase 9)**: Depends on all desired user stories being complete

### User Story Dependencies

- **US3 - Homepage (P1)**: Can start after Foundational (Phase 2) - No dependencies on other stories âœ… MVP
- **US5 - Content Creator (P2)**: Can start after Foundational (Phase 2) - No dependencies on other stories
- **US2 - Lesson TOC (P2)**: Can start after Foundational (Phase 2) - Works better with US5 content but can use placeholder docs
- **US1 - Sidebar Browsing (P1)**: Can start after Foundational (Phase 2) - Works better with US5 content but can use placeholder docs âœ… MVP
- **US4 - Mobile Navigation (P3)**: Can start after Foundational (Phase 2) - Benefits from US1/US2/US3 being complete for full testing

### Within Each User Story

- Components marked [P] can be developed in parallel (different files)
- Component development before integration (e.g., Header + HomepageHero before Homepage composition)
- Core implementation before testing
- Story complete before moving to next priority

### Parallel Opportunities

- **Setup Phase**: T004, T005, T006, T007, T008, T009 can run in parallel (different config sections)
- **Foundational Phase**: T013, T014, T015, T016 can run in parallel (different files)
- **US3 (Homepage)**: T019, T020, T021 can run in parallel (independent components)
- **US5 (Content)**: T030-T041 can run in parallel (independent folders/files)
- **US4 (Mobile)**: T062, T063, T064, T065, T066 can run in parallel (different CSS sections)
- **Phase 8**: T072, T073, T076, T077 can run in parallel (independent components)
- **Polish Phase**: T082, T083, T084, T085 can run in parallel (different files)
- **Different user stories** can be worked on in parallel by different team members after Foundational phase completes

---

## Parallel Example: User Story 3 (Homepage)

```bash
# Launch all component creation tasks for US3 in parallel:
Task T019: "Create Header component at src/components/Header.tsx"
Task T020: "Create HomepageHero component at src/components/HomepageHero.tsx"
Task T021: "Create TagBlock component at src/components/TagBlock.tsx"

# Then integrate sequentially:
Task T022: "Update homepage to compose components"
Task T023-T028: "Styling and testing"
```

---

## Parallel Example: User Story 5 (Content Structure)

```bash
# Launch all folder/file creation tasks for US5 in parallel:
Task T030: "Create Part 1 folder"
Task T031: "Add Part 1 _category_.json"
Task T032: "Create Chapter 1 folder"
Task T033: "Add Chapter 1 _category_.json"
Task T034: "Create Chapter 2 folder"
Task T035: "Add Chapter 2 _category_.json"
Task T036-T041: "Create all 6 lesson files"

# Then verify sequentially:
Task T042-T044: "Verify sidebar and document conventions"
```

---

## Implementation Strategy

### MVP First (User Stories 1 + 3 Only)

1. Complete Phase 1: Setup âœ…
2. Complete Phase 2: Foundational âœ… (CRITICAL - blocks all stories)
3. Complete Phase 3: User Story 3 (Homepage) âœ… MVP
4. Complete Phase 6: User Story 1 (Sidebar Browsing) âœ… MVP
5. **STOP and VALIDATE**: Test homepage and sidebar navigation independently
6. Deploy to GitHub Pages for review

**Why this MVP?**
- Homepage (US3) gives professional first impression
- Sidebar (US1) enables basic content navigation
- Together they provide a complete, usable documentation site
- Can add content and additional features incrementally

### Incremental Delivery

1. Complete Setup + Foundational â†’ Foundation ready âœ…
2. Add US3 (Homepage) â†’ Test independently â†’ Deploy/Demo (Polished landing page!)
3. Add US1 (Sidebar) â†’ Test independently â†’ Deploy/Demo (Navigation works!)
4. Add US5 (Content Creator) â†’ Test independently â†’ Deploy/Demo (Content structure established!)
5. Add US2 (Lesson TOC) â†’ Test independently â†’ Deploy/Demo (Reading experience improved!)
6. Add US4 (Mobile) â†’ Test independently â†’ Deploy/Demo (Mobile-friendly!)
7. Add Phase 8 (Breadcrumbs + AI Tools) â†’ Deploy/Demo (Enhanced navigation!)
8. Polish Phase â†’ Final deployment (Production-ready!)

### Parallel Team Strategy

With multiple developers:

1. Team completes Setup + Foundational together âœ…
2. Once Foundational is done:
   - **Developer A**: US3 (Homepage - Phase 3)
   - **Developer B**: US5 (Content Structure - Phase 4)
   - **Developer C**: US2 (Lesson TOC - Phase 5)
3. After US2 completes:
   - **Developer A**: US1 (Sidebar - Phase 6)
   - **Developer B**: US4 (Mobile - Phase 7)
   - **Developer C**: Phase 8 (Breadcrumbs + AI Tools)
4. All developers: Polish Phase (Phase 9) together

---

## Task Summary

**Total Tasks**: 100
- **Setup (Phase 1)**: 11 tasks
- **Foundational (Phase 2)**: 7 tasks
- **US3 - Homepage (Phase 3)**: 10 tasks âœ… MVP
- **US5 - Content Creator (Phase 4)**: 16 tasks
- **US2 - Lesson TOC (Phase 5)**: 9 tasks
- **US1 - Sidebar Browsing (Phase 6)**: 8 tasks âœ… MVP
- **US4 - Mobile Navigation (Phase 7)**: 10 tasks
- **Additional Features (Phase 8)**: 10 tasks
- **Polish (Phase 9)**: 19 tasks

**Parallel Opportunities Identified**: 45 tasks marked [P]

**Independent Test Criteria**: Defined for each user story

**Suggested MVP Scope**:
- Phase 1 (Setup) + Phase 2 (Foundational)
- Phase 3 (US3 - Homepage)
- Phase 6 (US1 - Sidebar Browsing)
- Subset of Phase 9 (Build, test, deploy)

**Format Validation**: âœ… All tasks follow checklist format (checkbox, ID, labels where appropriate, file paths)

---

## Notes

- [P] tasks = different files, no dependencies - can run in parallel
- [Story] label maps task to specific user story for traceability (US1, US2, US3, US4, US5)
- Each user story should be independently completable and testable
- Commit after each task or logical group
- Stop at any checkpoint to validate story independently
- No tests required for static site structure (no backend logic, Docusaurus handles build validation)
- All file paths are explicit for LLM execution
- Avoid: vague tasks, same file conflicts, cross-story dependencies that break independence
